### LightRAG Production Pipeline Configuration with Gemini 2.0 Flash
### Copy this file to your working directory and rename it to .env
### Modify the values according to your setup

###########################
### Server Configuration
###########################
HOST=0.0.0.0
PORT=9621
WEBUI_TITLE='LightRAG Gemini 2.0 Flash Pipeline'
WEBUI_DESCRIPTION="Production-Ready Knowledge Graph RAG System with Gemini 2.0 Flash"
WORKERS=1
CORS_ORIGINS=*

### Directory Configuration
INPUT_DIR=./inputs
WORKING_DIR=./rag_storage

### LightRAG Gemini Configuration
LIGHTRAG_MODEL_NAME=lightrag-gemini
LIGHTRAG_MODEL_TAG=2.0-flash

### Max nodes return from graph retrieval in webui
MAX_GRAPH_NODES=1000

### Logging Configuration
LOG_LEVEL=INFO
VERBOSE=false
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5
LOG_DIR=./logs

########################
### Query Configuration
########################
### LLM response cache for query (Not valid for streaming response)
ENABLE_LLM_CACHE=true
HISTORY_TURNS=3
COSINE_THRESHOLD=0.2

### Number of entities or relations retrieved from KG
TOP_K=60
### Maximum number of chunks plan to send to LLM
CHUNK_TOP_K=15
### Control the actual entities send to LLM
MAX_ENTITY_TOKENS=12000
### Control the actual relations send to LLM
MAX_RELATION_TOKENS=12000
### Control the maximum tokens send to LLM (include entities, relations and chunks)
MAX_TOTAL_TOKENS=32000
### Maximum number of related chunks per source entity or relation
RELATED_CHUNK_NUMBER=10

### Reranker Configuration - LLM Based
ENABLE_RERANK=true
### Use LLM for reranking instead of external models
RERANK_MODE=llm
### Minimum rerank score for document chunk exclusion
MIN_RERANK_SCORE=0.3
### LLM reranking configuration
RERANK_LLM_MODEL=gemini-2.0-flash
RERANK_MAX_DOCS=20

########################################
### Document Processing Configuration
########################################
### Language for entity/relation summaries
SUMMARY_LANGUAGE=English
ENABLE_LLM_CACHE_FOR_EXTRACT=true

### Chunk configuration for document splitting
CHUNK_SIZE=1200
CHUNK_OVERLAP_SIZE=200

### Entity and relation summarization configuration
FORCE_LLM_SUMMARY_ON_MERGE=4
MAX_TOKENS=8000
### Maximum number of entity extraction attempts for ambiguous content
MAX_GLEANING=2

### Document loading engine: DOCLING or DEFAULT
DOCUMENT_LOADING_ENGINE=DOCLING

###############################
### Concurrency Configuration
###############################
### Max concurrency requests of LLM (for both query and document processing)
MAX_ASYNC=6
### Number of parallel processing documents
MAX_PARALLEL_INSERT=3
### Max concurrency requests for Embedding
EMBEDDING_FUNC_MAX_ASYNC=8
### Number of chunks send to Embedding in single request
EMBEDDING_BATCH_NUM=16

#######################
### LLM Configuration - Gemini 2.0 Flash
#######################
### Timeout in seconds for LLM
TIMEOUT=300
### Temperature for Gemini model (0-1, 0 for deterministic)
TEMPERATURE=0.1
### Top-k sampling for Gemini
TOP_K_SAMPLING=40
### Top-p sampling for Gemini
TOP_P_SAMPLING=0.9

### LLM Binding - we'll use custom Gemini integration
LLM_BINDING=gemini
LLM_MODEL=gemini-2.0-flash
### Gemini API Configuration
GEMINI_API_KEY=AIzaSyBybth8NfYlNxjT8hfP-whMn9q2rDV657I
GEMINI_BASE_URL=https://generativelanguage.googleapis.com

### Advanced Gemini Configuration
GEMINI_MAX_OUTPUT_TOKENS=8192
GEMINI_CANDIDATE_COUNT=1
GEMINI_STOP_SEQUENCES=
### Safety settings for Gemini (BLOCK_NONE, BLOCK_FEW, BLOCK_SOME, BLOCK_MOST)
GEMINI_SAFETY_HARASSMENT=BLOCK_MEDIUM_AND_ABOVE
GEMINI_SAFETY_HATE_SPEECH=BLOCK_MEDIUM_AND_ABOVE
GEMINI_SAFETY_SEXUALLY_EXPLICIT=BLOCK_MEDIUM_AND_ABOVE
GEMINI_SAFETY_DANGEROUS_CONTENT=BLOCK_MEDIUM_AND_ABOVE

####################################################################################
### Embedding Configuration - Gemini Text Embeddings
####################################################################################
### Use Gemini native embeddings
EMBEDDING_BINDING=gemini
EMBEDDING_MODEL=text-embedding-001
EMBEDDING_DIM=3072
EMBEDDING_BATCH_SIZE=32
### Gemini embedding configuration (uses same GEMINI_API_KEY)
EMBEDDING_BASE_URL=https://generativelanguage.googleapis.com

### Alternative: If you want to use other embedding providers
# EMBEDDING_BINDING=jina
# EMBEDDING_MODEL=jina-embeddings-v3
# EMBEDDING_DIM=1024
# EMBEDDING_BINDING_HOST=https://api.jina.ai/v1/embeddings
# EMBEDDING_BINDING_API_KEY=your_jina_api_key_here

####################################################################
### WORKSPACE setting workspace name for data isolation
### Valid workspace name constraints: a-z, A-Z, 0-9, and _
####################################################################
WORKSPACE=gemini_production

############################
### Data Storage Selection
############################
### Default storage (Recommended for development and small scale)
LIGHTRAG_KV_STORAGE=JsonKVStorage
LIGHTRAG_DOC_STATUS_STORAGE=JsonDocStatusStorage
LIGHTRAG_GRAPH_STORAGE=NetworkXStorage
LIGHTRAG_VECTOR_STORAGE=NanoVectorDBStorage

### Production storage options (uncomment for production deployment)
# LIGHTRAG_KV_STORAGE=RedisKVStorage
# LIGHTRAG_DOC_STATUS_STORAGE=RedisDocStatusStorage
# LIGHTRAG_GRAPH_STORAGE=Neo4JStorage
# LIGHTRAG_VECTOR_STORAGE=MilvusVectorDBStorage

### Vector Storage Alternative Options
# LIGHTRAG_VECTOR_STORAGE=QdrantVectorDBStorage
# LIGHTRAG_VECTOR_STORAGE=FaissVectorDBStorage

### PostgreSQL Configuration (if using PostgreSQL storage)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_USER=lightrag_user
# POSTGRES_PASSWORD='your_secure_password'
# POSTGRES_DATABASE=lightrag_db
# POSTGRES_MAX_CONNECTIONS=20

### Redis Configuration (if using Redis storage)
# REDIS_URI=redis://localhost:6379
# REDIS_SOCKET_TIMEOUT=30
# REDIS_CONNECT_TIMEOUT=10
# REDIS_MAX_CONNECTIONS=100
# REDIS_RETRY_ATTEMPTS=3

### Neo4j Configuration (if using Neo4j storage)
# NEO4J_URI=neo4j+s://your-instance.databases.neo4j.io
# NEO4J_USERNAME=neo4j
# NEO4J_PASSWORD='your_neo4j_password'
# NEO4J_MAX_CONNECTION_POOL_SIZE=100

### Milvus Configuration (if using Milvus storage)
# MILVUS_URI=http://localhost:19530
# MILVUS_DB_NAME=lightrag
# MILVUS_USER=root
# MILVUS_PASSWORD=your_milvus_password

### Qdrant Configuration (if using Qdrant storage)
# QDRANT_URL=http://localhost:6333
# QDRANT_API_KEY=your-qdrant-api-key

############################
### Cache Configuration
############################
### Enable embedding cache to avoid recomputing embeddings
EMBEDDING_CACHE_ENABLED=true
EMBEDDING_CACHE_SIMILARITY_THRESHOLD=0.95

### LLM cache configuration
LLM_CACHE_TTL=3600
LLM_CACHE_MAX_SIZE=10000

############################
### Performance Tuning
############################
### Auto scan documents at startup
AUTO_SCAN_AT_STARTUP=false

### Memory optimization
MEMORY_OPTIMIZATION=true
BATCH_PROCESSING=true

### Indexing performance
INDEX_BATCH_SIZE=100
INDEX_PARALLEL_WORKERS=4

############################
### Monitoring & Analytics
############################
### Enable token tracking for cost monitoring
ENABLE_TOKEN_TRACKING=true
TOKEN_TRACKING_LOG_INTERVAL=100

### Enable performance metrics
ENABLE_METRICS=true
METRICS_ENDPOINT=/metrics

### Health check configuration
HEALTH_CHECK_INTERVAL=60
HEALTH_CHECK_TIMEOUT=30

############################
### Development & Debugging
############################
### Enable debug mode (only for development)
DEBUG_MODE=false
### Enable query explanation (shows reasoning process)
ENABLE_QUERY_EXPLANATION=false
### Enable detailed logging for embeddings
EMBEDDING_DEBUG=false
### Enable graph visualization debug data
GRAPH_DEBUG=false

####################################################################################
### Streamlit Application Configuration
####################################################################################
### Streamlit server settings
STREAMLIT_HOST=localhost
STREAMLIT_PORT=8501
STREAMLIT_TITLE=LightRAG Gemini 2.0 Flash
STREAMLIT_PAGE_ICON=ðŸ§ 
STREAMLIT_LAYOUT=wide
STREAMLIT_SIDEBAR_STATE=expanded

### Default query parameters for Streamlit UI
DEFAULT_QUERY_MODE=mix
DEFAULT_TOP_K=10
DEFAULT_CHUNK_TOP_K=5
DEFAULT_TEMPERATURE=0.7
DEFAULT_MAX_OUTPUT_TOKENS=2048
DEFAULT_ENABLE_RERANK=true
DEFAULT_STREAM_RESPONSE=true
DEFAULT_HISTORY_TURNS=5

### Knowledge Graph Visualization defaults
KG_DEFAULT_MAX_DEPTH=3
KG_DEFAULT_MAX_NODES=500
KG_LAYOUT_ALGORITHM=spring_layout
KG_NODE_SIZE=20
KG_EDGE_WIDTH=1
KG_NODE_COLOR=lightblue
KG_EDGE_COLOR=gray
KG_FIGURE_HEIGHT=600

### LightRAG uses default workspace mechanisms

### API Connection Settings for Streamlit
API_REQUEST_TIMEOUT=30
API_UPLOAD_TIMEOUT=60
API_RETRY_ATTEMPTS=3
API_RETRY_DELAY=1

### UI Performance Settings
UI_AUTO_REFRESH_INTERVAL=30
UI_MAX_CHAT_HISTORY=100
UI_PAGE_SIZE=50
UI_CHART_HEIGHT=400
UI_MESSAGES_PER_PAGE=20

### Reranking UI Configuration
RERANK_TEMPERATURE=0.1
RERANK_MAX_TOKENS_PER_DOC=500
RERANK_ENABLE_EXPLANATION=false

### LLM Reranker Configuration
RERANK_MAX_TOKENS_PER_DOC=500
RERANK_TEMPERATURE=0.1
RERANK_ENABLE_EXPLANATION=false 