Think you are a senior software developer in AI and RAG system. Understand the whole codebase inside lightrag dir. I need you to implement full end to end rag pipeline which will be more reliable, robust, fully functional rag system. I have given you the full source code of lightrag core functionality, api server and lightrag_webui for frontend application. i need to use Gemini 2.0 flash llm model, gemma tokenizer, suitable gemini embedding model, reranking model with all the core functionality and feature like cacheing, glenning, query param, history, context retrival logic, storages logic, document processing logics. For now use default storage for all. So give me api server by refering lightrag api code, lightrag gemini pipeline code, web interface by refereing webui code. i have all attached the examples to refer and get idea for gemini models implementation. Implement all api endpoints availalbe and all api endpints called by fronend and make it more robust, reliable and fully functional sytem. do not hallucinate the reponse, follow best practices. add necessary env variables in .env to control the paramerter of whole rag ppeline sytsem. refere .env.example. You can also refer below code:

"""
LightRAG API Server - Production Ready

A comprehensive FastAPI server that provides a REST API for the LightRAG production pipeline.
This server wraps the ProductionRAGPipeline and exposes all endpoints needed by the frontend.

Features:
- Gemini LLM integration with token tracking
- Gemini native embeddings
- Advanced caching with multiple modes
- Reranker integration with mix mode as default
- Query parameter controls
- Data isolation between instances
- Multimodal document processing
- Production-ready logging and error handling
- All backend API endpoints should utilised from lightrag_api server python file, all api should be fully functional and ready for usage by frontend. 
- So, the idea is to build a full end to end RAG pipeline with above requirement, it should be full functional with all lightrag core feature, expose all api endoints if offers, full end to end pipeline i need. 

Note: Do not hallucinate, give me reliable, robust, full functiona end to end RAG pipeline system. api server and rag system of differenct files. 
"""